<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery-3.3.1.min.js"></script>
</head>
<body>
<form id="login-form">
        <h2> 登 录
        </h2>
        <div >
            <label>
                <i class="fas fa-user"></i>
                账号
            </label>
            <input id="name" placeholder="请输入你的账号" name="name" type="text">
        </div>
        <div >
            <label>
                密码
            </label>
            <input id="password" placeholder="请输入你的密码" name="password" type="password" >
        </div>

        <input type="submit" id="login-button" value="登 录">
</form>
</body>
<script type="text/javascript">
    $(function () {
        $('#login-button').click(function (event) {
            event.preventDefault();
            var params = $("#login-form").serialize();
            var input_name = $("#name").val();
            var input_password = $("#password").val();
            if (!(input_name && input_password)) {
                alert("请输入完整信息！");
                return;
            }
            $.ajax({
                url: 'http://localhost:8080/admin',
                type: 'POST',
                dataType: 'json',
                data: {
                    method:"login",
                    name: params.name,
                    password:params.password
                },
                error:function(err){
                    console.log(err);
                    alert(err+"error");
                },
                success: function (data) {  //成功执行方法
                    if (data==='0') {

                        alert("登录失败!账号或密码错误!");

                    }
                    else if(data==='1'){
                        console.log(data);
                        //$('.form-success-login h1').html("登录成功！" + "<span>3</span>s后跳转");
                        //var username = data.name;
                        // localStorage.setItem('username', username);
                        //setInterval(delayURL, 1000);
                        window.location.href = "http://localhost:8080/main.html";

                    }
                }
            });
        });
    })
</script>
</html>